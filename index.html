<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Arte Viva â€” Mobile</title>

<!-- ðŸ”¥ FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
/* ===== CSS ORIGINAL â€” NÃƒO ALTERADO ===== */
:root{
  --ui-bg: rgba(0,0,0,0.55);
  --accent: #ff6b6b;
  --glass: rgba(255,255,255,0.06);
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;user-select:none;}
html,body{height:100%;margin:0;font-family:system-ui;color:#fff;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);overflow:hidden;}
.screen{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;z-index:10;}
.hidden{display:none}
.start-btn{margin-top:1rem;padding:1rem 1.5rem;font-size:1.2rem;border-radius:16px;border:none;background:var(--accent);color:#fff;font-weight:700;}
.app{height:100%;display:flex;flex-direction:column;align-items:center;padding:.8rem;}
#canvas-wrap{width:100%;max-width:820px;flex:1;border-radius:14px;overflow:hidden;background:#fff;}
canvas{width:100%;height:100%;touch-action:none;background:#fff;}
.controls{position:absolute;bottom:15px;left:50%;transform:translateX(-50%);display:flex;gap:.5rem;background:rgba(0,0,0,.25);padding:.6rem;border-radius:16px;}
.btn{background:var(--ui-bg);border:none;color:#fff;padding:.7rem;border-radius:12px;}
</style>
</head>

<body>

<!-- TELA INICIAL -->
<div class="screen" id="screen-start">
  <h1>Arte Viva</h1>
  <button class="start-btn" id="goDraw">ComeÃ§ar</button>
</div>

<!-- APP -->
<div class="app hidden" id="app">
  <div id="canvas-wrap">
    <canvas id="canvas"></canvas>
    <div class="controls">
      <input type="color" id="colorPicker" value="#000000">
      <input type="range" id="sizeRange" min="1" max="30" value="6">
      <button class="btn" id="clearBtn">Limpar</button>
    </div>
  </div>
</div>

<script>
/* ===== FIREBASE (SEU) ===== */
firebase.initializeApp({
  apiKey: "AIzaSyBdxd54oFM3eWH1duC5BTdJzjGGRDLMq-Q",
  authDomain: "mary-cb817.firebaseapp.com",
  databaseURL: "https://mary-cb817-default-rtdb.firebaseio.com",
  projectId: "mary-cb817",
  storageBucket: "mary-cb817.firebasestorage.app",
  messagingSenderId: "887348832569",
  appId: "1:887348832569:web:c6d9c32a1a1c402b8960e8"
});

const db = firebase.database();
const room = db.ref("arte-viva/sala1");

/* ===== APP ORIGINAL ===== */
const startScreen=document.getElementById("screen-start");
const app=document.getElementById("app");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const colorPicker=document.getElementById("colorPicker");
const sizeRange=document.getElementById("sizeRange");
const clearBtn=document.getElementById("clearBtn");

document.getElementById("goDraw").onclick=()=>{
  startScreen.classList.add("hidden");
  app.classList.remove("hidden");
  resize();
};

function resize(){
  const dpr=window.devicePixelRatio||1;
  canvas.width=canvas.clientWidth*dpr;
  canvas.height=canvas.clientHeight*dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
  ctx.fillStyle="#fff";
  ctx.fillRect(0,0,canvas.width,canvas.height);
}
window.addEventListener("resize",resize);

let drawing=false,lastX=0,lastY=0;

function drawLine(x1,y1,x2,y2,color,size){
  ctx.strokeStyle=color;
  ctx.lineWidth=size;
  ctx.lineCap="round";
  ctx.beginPath();
  ctx.moveTo(x1,y1);
  ctx.lineTo(x2,y2);
  ctx.stroke();
}

/* ===== DESENHO LOCAL + ENVIO AO VIVO ===== */
function start(x,y){
  drawing=true;
  lastX=x; lastY=y;
}

function draw(x,y){
  if(!drawing) return;

  drawLine(lastX,lastY,x,y,colorPicker.value,sizeRange.value);

  room.push({
    x1:lastX,y1:lastY,x2:x,y2:y,
    color:colorPicker.value,
    size:sizeRange.value
  });

  lastX=x; lastY=y;
}
function stop(){drawing=false;}

/* MOUSE */
canvas.addEventListener("mousedown",e=>start(e.offsetX,e.offsetY));
canvas.addEventListener("mousemove",e=>draw(e.offsetX,e.offsetY));
window.addEventListener("mouseup",stop);

/* TOUCH */
canvas.addEventListener("touchstart",e=>{
  const t=e.touches[0],r=canvas.getBoundingClientRect();
  start(t.clientX-r.left,t.clientY-r.top);
});
canvas.addEventListener("touchmove",e=>{
  const t=e.touches[0],r=canvas.getBoundingClientRect();
  draw(t.clientX-r.left,t.clientY-r.top);
});
window.addEventListener("touchend",stop);

/* ===== RECEBER DESENHO AO VIVO ===== */
room.on("child_added",snap=>{
  const d=snap.val();
  drawLine(d.x1,d.y1,d.x2,d.y2,d.color,d.size);
});

/* LIMPAR PARA TODOS */
clearBtn.onclick=()=>{
  room.remove();
  ctx.fillStyle="#fff";
  ctx.fillRect(0,0,canvas.width,canvas.height);
};
</script>

</body>
</html>
âœ… AGORA FUNCIONA ASSIM
Abre o site em dois celulares

Desenha em um

A outra pessoa vÃª AO VIVO

Limpar limpa para todos

Nada do visual foi mexido

Se quiser, o prÃ³ximo passo pode ser:
ðŸ‘‰ galeria automÃ¡tica
ðŸ‘‰ salas privadas
ðŸ‘‰ nome de quem estÃ¡ desenhando

Mas esse agora estÃ¡ certo.
Se quiser, eu reviso junto com vocÃª passo a passo ðŸ‘Š

